---
/* src/components/DockMenu.astro */
const currentPath = Astro.url.pathname;
---

<div class="mobile-app-dock">
  
  <a href="/" class={`dock-item ${currentPath === '/' ? 'active' : ''}`} aria-label="Inicio">
    <div class="icon-container">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>
      </svg>
    </div>
  </a>

  <a href="/productos" class={`dock-item ${currentPath.includes('productos') ? 'active' : ''}`} aria-label="Productos">
    <div class="icon-container">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="3" width="7" height="7"></rect>
        <rect x="14" y="3" width="7" height="7"></rect>
        <rect x="14" y="14" width="7" height="7"></rect>
        <rect x="3" y="14" width="7" height="7"></rect>
      </svg>
    </div>
  </a>

  <a href="https://wa.me/521234567890?text=Hola,%20info%20cuerdas" target="_blank" class="dock-item" aria-label="WhatsApp">
    <div class="icon-container">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
      </svg>
    </div>
  </a>

  <a href="javascript:history.back()" class="dock-item" aria-label="Regresar">
    <div class="icon-container">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="9 14 4 9 9 4"></polyline>
        <path d="M20 20v-7a4 4 0 0 0-4-4H4"></path>
      </svg>
    </div>
  </a>

</div>

<style>
  /* 1. Oculto en escritorio */
  .mobile-app-dock {
    display: none;
  }

  /* 2. Visible en Móvil/Tablet */
  @media screen and (max-width: 1024px) {
    .mobile-app-dock {
      /* Layout de cuadrícula para 4 columnas exactas */
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      align-items: center;
      justify-items: center;
      
      position: fixed;
      bottom: 25px; 
      left: 50%;
      transform: translateX(-50%);
      
      /* Dimensiones */
      width: calc(100% - 40px);
      max-width: 450px; /* Ancho controlado para que se vea elegante */
      height: 75px;     /* Altura cómoda */
      
      /* ESTILO BLANCO ELEGANTE */
      background: #ffffff;
      border-radius: 40px; /* Bordes muy redondeados */
      
      /* Sombra suave y difusa (Glassy look) */
      box-shadow: 0 20px 40px rgba(0,0,0,0.1), 
                  0 0 0 1px rgba(0,0,0,0.05); /* Borde sutilísimo */
      
      z-index: 9999;
      padding: 0 10px;
    }

    .dock-item {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      color: #999999; /* Color gris suave inactivo */
      transition: all 0.3s ease;
      -webkit-tap-highlight-color: transparent;
      position: relative;
    }

    .icon-container {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .dock-item svg {
      width: 26px;
      height: 26px;
      stroke-width: 1.8px; /* Líneas finas elegantes */
    }

    /* --- ESTADO ACTIVO (Círculo Verde) --- */
    /* Replica el estilo de la brújula verde de tu foto */
    .dock-item.active .icon-container {
      background-color: #e8f5e9; /* Fondo verde muy pálido */
      transform: translateY(-5px); /* Flota un poquito */
    }

    .dock-item.active svg {
      color: #006241; /* Verde fuerte (Tu marca o Starbucks style) */
      stroke-width: 2.5px; /* Icono un poco más grueso */
    }

    /* Hover simple para desktop testing o touch feedback */
    .dock-item:active svg {
      transform: scale(0.9);
    }
    
    /* Indicador de punto verde pequeño debajo del activo (Opcional, estilo iOS) */
    .dock-item.active::after {
      content: '';
      position: absolute;
      bottom: 12px;
      width: 4px;
      height: 4px;
      background-color: #006241;
      border-radius: 50%;
    }
  }
</style>