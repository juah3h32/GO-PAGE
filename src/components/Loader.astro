<div id="loader-wrapper">
  <div class="grid-background"></div>
  
  <div class="tech-center">
    <div class="rings-portal">
      <div class="ring ring-outer"></div>
      <div class="ring ring-middle"></div>
      <div class="ring ring-inner"></div>
      
      <div class="logo-core">
        <img src="/images/logo/logo.png" alt="Grupo Ortiz Logo" class="main-logo" />
        <div class="scanner-line"></div>
        <div class="core-glow"></div>
      </div>
    </div>

    <div class="loading-info">
      <div class="glitch-text" data-text="SISTEMA GRUPO ORTIZ">GRUPO ORTIZ</div>
      <div class="status-container">
        <div class="status-bar">
          <div class="status-fill"></div>
        </div>
        <span id="percent-text">0%</span>
      </div>
      <div class="loading-subtext">CARGANDO RECURSOS...</div>
    </div>
  </div>
</div>

<style>
  :root {
    /* CAMBIO A NARANJA TECNOLÓGICO */
    --tech-orange: #ff9100; 
    --tech-orange-glow: rgba(255, 145, 0, 0.5);
    --bg-dark: #0a0600; /* Fondo negro con un toque cálido */
  }

  #loader-wrapper {
    position: fixed;
    inset: 0;
    background: var(--bg-dark);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    overflow: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    transition: opacity 1s cubic-bezier(0.4, 0, 0.2, 1), visibility 1s;
  }

  /* Fondo Dinámico Naranja */
  .grid-background {
    position: absolute;
    width: 200%;
    height: 200%;
    background-image: 
      linear-gradient(rgba(255, 145, 0, 0.05) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 145, 0, 0.05) 1px, transparent 1px);
    background-size: 60px 60px;
    transform: perspective(500px) rotateX(60deg);
    animation: gridMove 12s linear infinite;
    top: -50%;
    filter: blur(1px);
  }

  .tech-center {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 50px;
    z-index: 10;
  }

  .rings-portal {
    position: relative;
    width: 300px;
    height: 300px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .ring {
    position: absolute;
    border-radius: 50%;
    border: 2px solid transparent;
  }

  .ring-outer {
    width: 100%;
    height: 100%;
    border-top: 3px solid var(--tech-orange);
    border-bottom: 3px solid var(--tech-orange);
    animation: spin 4s linear infinite;
    opacity: 0.8;
    box-shadow: 0 0 25px var(--tech-orange-glow);
  }

  .ring-middle {
    width: 85%;
    height: 85%;
    border-left: 2px solid #fff;
    border-right: 2px solid #fff;
    animation: spin-reverse 3s linear infinite;
    opacity: 0.2;
  }

  .ring-inner {
    width: 70%;
    height: 70%;
    border: 1px dashed var(--tech-orange);
    animation: spin 10s linear infinite;
    opacity: 0.5;
  }

  .logo-core {
    position: relative;
    width: 60%;
    height: 60%;
    display: flex;
    justify-content: center;
    align-items: center;
    background: radial-gradient(circle, rgba(255, 145, 0, 0.15) 0%, transparent 70%);
    border-radius: 50%;
  }

  .main-logo {
    width: 140px;
    height: auto;
    z-index: 5;
    filter: drop-shadow(0 0 15px rgba(255, 145, 0, 0.4));
  }

  .scanner-line {
    position: absolute;
    top: 0;
    left: 10%;
    width: 80%;
    height: 2px;
    background: var(--tech-orange);
    box-shadow: 0 0 15px var(--tech-orange), 0 0 30px var(--tech-orange);
    animation: scanVertical 3s ease-in-out infinite;
    z-index: 6;
  }

.loading-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: white;
  gap: 10px; /* espacio entre elementos */
}

  .glitch-text {
    font-size: 14px;
    font-weight: 900;
    letter-spacing: 5px;
    text-transform: uppercase;
    margin-bottom: 10px;
    color: var(--tech-orange);
    text-shadow: 0 0 15px var(--tech-orange-glow);
  }

.status-bar {
  flex: 1; /* que la barra ocupe todo el ancho disponible */
  max-width: 200px; /* ancho máximo */
  height: 6px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 10px;
  overflow: hidden;
  border: 1px solid rgba(255,145,0,0.2);
  position: relative;
}
  .status-container {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px; /* espacio entre barra y porcentaje */
  width: 100%;
}

.status-fill {
  width: 0%;
  height: 100%;
  background: linear-gradient(90deg, #ff5e00, var(--tech-orange));
  box-shadow: 0 0 15px var(--tech-orange);
  transition: width 0.1s linear;
  position: absolute;
  top: 0;
  left: 0;
}

#percent-text {
  font-family: monospace;
  font-size: 14px;
  color: var(--tech-orange);
  /* eliminar margin-left para centrar todo */
}
  @keyframes gridMove {
    0% { transform: perspective(500px) rotateX(60deg) translateY(0); }
    100% { transform: perspective(500px) rotateX(60deg) translateY(60px); }
  }

  @keyframes spin { 100% { transform: rotate(360deg); } }
  @keyframes spin-reverse { 100% { transform: rotate(-360deg); } }

  @keyframes scanVertical {
    0%, 100% { top: 20%; opacity: 0; }
    50% { top: 80%; opacity: 1; }
  }

  .loader-hidden {
    opacity: 0 !important;
    visibility: hidden !important;
  }
</style>

<script is:inline>
  function initTechLoader() {
    const loader = document.getElementById('loader-wrapper');
    const percentText = document.getElementById('percent-text');
    const statusFill = document.querySelector('.status-fill');

    if (!loader || !percentText || !statusFill) {
      console.error('Loader elements missing', {
        loader,
        percentText,
        statusFill
      });
      return;
    }

    let count = 0;

    const interval = setInterval(() => {
      count += Math.floor(Math.random() * 3) + 1;
      if (count > 100) count = 100;

      percentText.textContent = count + "%";
      statusFill.style.width = count + "%";

      if (count === 100) {
        clearInterval(interval);
        setTimeout(() => {
          loader.classList.add('loader-hidden');
        }, 600);
      }
    }, 50);
  }

  window.addEventListener('load', initTechLoader);
</script>


