---
import "../../styles/cuerdas.css";
import BaseLayout from "../../layouts/BaseLayout.astro";
import CustomCursor from "../../components/CustomCursor.astro";
import AudioVisualizer from "../../components/AudioVisualizer.astro";
import BuyButton from "../../components/BuyButton.astro";
import Navbar from "../../components/Nadbar.astro";

/* -------------------------------------------------------------------------- */
/* DATOS */
/* -------------------------------------------------------------------------- */
const products = [
  { id: 0, name: 'Cuerda', img: '/images/cuerdas/CuerdaT1.webp', active: true, link: '...' },
  { id: 1, name: 'Strech', img: '/images/cuerdas/CuerdaNegra.webp', active: false, link: '...' },
  { id: 2, name: 'Rafia', img: '/images/img3.png', active: false, link: '...' }
];

// IDs fijos para JS
const specs = [
  { label: "Rendimiento", id: "spec-load", tag: "Alta" },
  { label: "Unidad", id: "spec-diam", tag: "Pieza" },
  { label: "Material", id: "spec-mat", tag: "100%" },
  { label: "Peso", id: "spec-elong", tag: "Promedio" },
  { label: "Resistencia", id: "spec-grip", tag: "Alta" },
  { label: "Carga", id: "spec-loadresist", tag: "Buena" },
];
---

<BaseLayout title="Cuerda | Grupo Ortiz">
  <script is:inline type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
  <script is:inline src="https://cdn.jsdelivr.net/npm/gsap@3.0.1/dist/gsap.min.js"></script>

  <Navbar />
  <CustomCursor />

  <main class="main-container">

    <div class="content">
      <a href="/productos" class="back-arrow-btn" aria-label="Volver">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="19" y1="12" x2="5" y2="12" />
          <polyline points="12 19 5 12 12 5" />
        </svg>
      </a>
    
      <div class="text-area">
         <h1 id="product-title" class="fade-in-text">Cargando...</h1>
         <p id="product-desc" class="fade-in-text"></p>

        <div class="specs-container fade-in-text">
          <h3 class="specs-title">ESPECIFICACIONES TÃ‰CNICAS</h3>

          <div class="specs-grid">
            {specs.map((spec) => (
              <div class="spec-box">
                <span class="spec-label">{spec.label}</span>
                <span class="spec-value" id={spec.id}>--</span>
                <span class="spec-percent">{spec.tag}</span>
              </div>
            ))}
          </div>
        </div>

  <div class="fade-in-text w-full flex justify-center lg:justify-start">
     <BuyButton />
</div>
      </div>

      <div class="thumbnails fade-in-text">
        {products.map((prod, index) => (
          <div
            class={`thumb-item ${prod.active ? 'active' : ''}`}
            data-index={index}
            data-link={prod.link}
          >
            <img src={prod.img} alt={prod.name} />
          </div>
        ))}
      </div>
    </div>

    <div class="wheel-container">
      <div class="wheel" id="product-wheel">

        <model-viewer
          id="rafia-3d"
          src="/models/rafiaNegra.glb"
          alt="Modelo 3D"
          camera-orbit="0deg 90deg 180%"
          min-camera-orbit="auto auto 300%"
          camera-controls
          auto-rotate
          interaction-prompt="none"
          class="model-3d-custom" 
          style="display:none;"
        ></model-viewer>

        {products.map((prod, index) => (
          <div class={`wheel-item item-${index} ${index === 0 ? 'active' : ''}`}>
            <img src={prod.img} alt={prod.name} />
          </div>
        ))}
      </div>
      
  
    </div>

<div style="position: fixed; bottom: 30px; right: 96px; z-index: 100; pointer-events: none;">
         <div style="pointer-events: auto;">
             <AudioVisualizer transition:persist />
         </div>
    </div>


  </main>

  <script src="/scripts/cuerdas.js" defer></script>
</BaseLayout>