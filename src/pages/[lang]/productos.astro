---
// src/pages/[lang]/productos.astro

// 1. IMPORTACIONES
import "../../styles/producto.css";
import "../../styles/carousel.css";
import "../../styles/flechas.css";

import BaseLayout from "../../layouts/BaseLayout.astro";
import CustomCursor from "../../components/CustomCursor.astro";
import Navbar from "../../components/Nadbar.astro";
import { translations } from "../../i18n/translations";

// 2. GENERACIÓN DE RUTAS
export function getStaticPaths() {
  return [
    { params: { lang: 'es' } },
    { params: { lang: 'en' } },
    { params: { lang: 'zh' } },
    { params: { lang: 'ar' } },
    { params: { lang: 'pt' } },
  ];
}

// 3. LÓGICA DE IDIOMA
const { lang } = Astro.params;

// Seleccionamos el idioma correcto, o español si falla
const t = translations[lang as keyof typeof translations] || translations['es'];

// Extraemos los datos necesarios del archivo de traducción
const navData = t.nav;             // Textos del menú
const productsList = t.products_list; // La lista de productos traducida
const seeMoreText = t.common.seeMore; // Texto del botón "Ver más"
---

<BaseLayout title={`Productos | Grupo Ortiz`}>
  
  <Navbar currentLang={lang} t={navData} />
  
  <CustomCursor />

  <main class="productos-main" dir={lang === 'ar' ? 'rtl' : 'ltr'}>
    <div class="carousel">
      <div class="list">
        
        {productsList.map((item) => (
          <div class="item">
            <img src={`/images/${item.img}`} alt={item.division} />

            <div class="introduce">
              <div class="title">GRUPO ORTIZ</div>
              <div class="topic">{item.division}</div>
              <div class="des">{item.descripcion}</div>
              
              <a href={`/${lang}/${item.slug}`} class="seeMore">
                {seeMoreText}
              </a>
            </div>
          </div>
        ))}

      </div>

      <div class="arrows">
        <button id="prev" aria-label="Anterior">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
        </button>
        <button id="next" aria-label="Siguiente">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </button>
      </div>
    </div>
  </main>

  <script src="/scripts/producto.js" defer></script>
</BaseLayout>